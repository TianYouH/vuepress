<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>chai.js 断言库 | 你好世界</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/blogs/favicon.ico">
    <meta name="description" content="这是我的博客">
    <link rel="preload" href="/blogs/assets/css/0.styles.e18e9f23.css" as="style"><link rel="preload" href="/blogs/assets/js/app.899da232.js" as="script"><link rel="preload" href="/blogs/assets/js/2.c73eb779.js" as="script"><link rel="preload" href="/blogs/assets/js/12.71918856.js" as="script"><link rel="prefetch" href="/blogs/assets/js/10.8b7bb068.js"><link rel="prefetch" href="/blogs/assets/js/11.f7cbab53.js"><link rel="prefetch" href="/blogs/assets/js/13.3ed68190.js"><link rel="prefetch" href="/blogs/assets/js/14.03529f86.js"><link rel="prefetch" href="/blogs/assets/js/15.3053ffb2.js"><link rel="prefetch" href="/blogs/assets/js/16.8e07e3bf.js"><link rel="prefetch" href="/blogs/assets/js/17.33cd47d5.js"><link rel="prefetch" href="/blogs/assets/js/18.9502d3bf.js"><link rel="prefetch" href="/blogs/assets/js/19.29adb430.js"><link rel="prefetch" href="/blogs/assets/js/20.29ec0b81.js"><link rel="prefetch" href="/blogs/assets/js/21.17d4942f.js"><link rel="prefetch" href="/blogs/assets/js/22.f0fbb824.js"><link rel="prefetch" href="/blogs/assets/js/23.50122237.js"><link rel="prefetch" href="/blogs/assets/js/24.8abe6113.js"><link rel="prefetch" href="/blogs/assets/js/25.0921d403.js"><link rel="prefetch" href="/blogs/assets/js/26.8ab63296.js"><link rel="prefetch" href="/blogs/assets/js/27.3d90000f.js"><link rel="prefetch" href="/blogs/assets/js/28.5ec724ef.js"><link rel="prefetch" href="/blogs/assets/js/29.000895f9.js"><link rel="prefetch" href="/blogs/assets/js/3.c7ea1863.js"><link rel="prefetch" href="/blogs/assets/js/30.20b5fc97.js"><link rel="prefetch" href="/blogs/assets/js/31.0e3ad5a4.js"><link rel="prefetch" href="/blogs/assets/js/32.05373c4a.js"><link rel="prefetch" href="/blogs/assets/js/33.2e15565e.js"><link rel="prefetch" href="/blogs/assets/js/34.d30cdedb.js"><link rel="prefetch" href="/blogs/assets/js/35.eeb81f3f.js"><link rel="prefetch" href="/blogs/assets/js/36.e2c9d505.js"><link rel="prefetch" href="/blogs/assets/js/37.3e9ea5d7.js"><link rel="prefetch" href="/blogs/assets/js/38.609f184e.js"><link rel="prefetch" href="/blogs/assets/js/39.66306642.js"><link rel="prefetch" href="/blogs/assets/js/4.7d5f245c.js"><link rel="prefetch" href="/blogs/assets/js/40.906d0533.js"><link rel="prefetch" href="/blogs/assets/js/41.dc08ec12.js"><link rel="prefetch" href="/blogs/assets/js/42.c5da8351.js"><link rel="prefetch" href="/blogs/assets/js/43.a5915163.js"><link rel="prefetch" href="/blogs/assets/js/44.0122b917.js"><link rel="prefetch" href="/blogs/assets/js/45.1ba09b72.js"><link rel="prefetch" href="/blogs/assets/js/46.b38a2295.js"><link rel="prefetch" href="/blogs/assets/js/47.0349128a.js"><link rel="prefetch" href="/blogs/assets/js/48.d4a597db.js"><link rel="prefetch" href="/blogs/assets/js/49.d23bf49b.js"><link rel="prefetch" href="/blogs/assets/js/5.09c2869e.js"><link rel="prefetch" href="/blogs/assets/js/50.737542aa.js"><link rel="prefetch" href="/blogs/assets/js/51.b1a0569a.js"><link rel="prefetch" href="/blogs/assets/js/52.285a2a9a.js"><link rel="prefetch" href="/blogs/assets/js/53.3e1d5bee.js"><link rel="prefetch" href="/blogs/assets/js/54.c8e2f49c.js"><link rel="prefetch" href="/blogs/assets/js/55.8e391b31.js"><link rel="prefetch" href="/blogs/assets/js/56.31495123.js"><link rel="prefetch" href="/blogs/assets/js/57.e78db422.js"><link rel="prefetch" href="/blogs/assets/js/58.802d4b5c.js"><link rel="prefetch" href="/blogs/assets/js/59.92b8be69.js"><link rel="prefetch" href="/blogs/assets/js/6.a4873fcd.js"><link rel="prefetch" href="/blogs/assets/js/60.40738d0f.js"><link rel="prefetch" href="/blogs/assets/js/61.ce3cff27.js"><link rel="prefetch" href="/blogs/assets/js/62.6653dc4a.js"><link rel="prefetch" href="/blogs/assets/js/63.d4b87fe4.js"><link rel="prefetch" href="/blogs/assets/js/7.af43948c.js"><link rel="prefetch" href="/blogs/assets/js/8.fe42ff2a.js"><link rel="prefetch" href="/blogs/assets/js/9.3b7278a3.js">
    <link rel="stylesheet" href="/blogs/assets/css/0.styles.e18e9f23.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blogs/" class="home-link router-link-active"><!----> <span class="site-name">你好世界</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/web/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/blogs/web/javascript/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/blogs/web/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/blogs/web/webapi/" class="nav-link">
  WebApi
</a></li><li class="dropdown-item"><!----> <a href="/blogs/web/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/blogs/web/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/blogs/web/designMode/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/blogs/web/knowledge/" class="nav-link">
  知识点
</a></li><li class="dropdown-item"><!----> <a href="/blogs/web/issue/" class="nav-link">
  面试题
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务" class="dropdown-title"><span class="title">服务</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/koa/" class="nav-link">
  Koa
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据" class="dropdown-title"><span class="title">数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><span class="title">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/test/" class="nav-link router-link-active">
  测试
</a></li><li class="dropdown-item"><!----> <a href="/blogs/git/" class="nav-link">
  GIT
</a></li><li class="dropdown-item"><!----> <a href="/blogs/http/" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/blogs/linux/" class="nav-link">
  Linux
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/web/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/blogs/web/javascript/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/blogs/web/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/blogs/web/webapi/" class="nav-link">
  WebApi
</a></li><li class="dropdown-item"><!----> <a href="/blogs/web/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/blogs/web/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/blogs/web/designMode/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/blogs/web/knowledge/" class="nav-link">
  知识点
</a></li><li class="dropdown-item"><!----> <a href="/blogs/web/issue/" class="nav-link">
  面试题
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务" class="dropdown-title"><span class="title">服务</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/koa/" class="nav-link">
  Koa
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据" class="dropdown-title"><span class="title">数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><span class="title">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/test/" class="nav-link router-link-active">
  测试
</a></li><li class="dropdown-item"><!----> <a href="/blogs/git/" class="nav-link">
  GIT
</a></li><li class="dropdown-item"><!----> <a href="/blogs/http/" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/blogs/linux/" class="nav-link">
  Linux
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blogs/test/" aria-current="page" class="sidebar-link">test</a></li><li><a href="/blogs/test/Chaijs.html" aria-current="page" class="active sidebar-link">chai.js 断言库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#bdd" class="sidebar-link">BDD</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#语言链" class="sidebar-link">语言链</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#not" class="sidebar-link">.not</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#deep" class="sidebar-link">.deep</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#any" class="sidebar-link">.any</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#all" class="sidebar-link">.all</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#a-type-an-type" class="sidebar-link">.a(type) / .an(type)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#include-value-contains-value" class="sidebar-link">.include(value) / contains(value)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#ok" class="sidebar-link">.ok</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#true" class="sidebar-link">.true</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#false" class="sidebar-link">.false</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#null" class="sidebar-link">.null</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#undefined" class="sidebar-link">.undefined</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#nan" class="sidebar-link">.NaN</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#exist" class="sidebar-link">.exist</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#empty" class="sidebar-link">.empty</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#arguments" class="sidebar-link">.arguments</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#equal-value" class="sidebar-link">.equal(value)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#eql-value" class="sidebar-link">.eql(value)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#above-value" class="sidebar-link">.above(value)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#least-value" class="sidebar-link">.least(value)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#below-value" class="sidebar-link">.below(value)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#most-value" class="sidebar-link">.most(value)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#within-start-finish" class="sidebar-link">.within(start, finish)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#instanceof-constructor" class="sidebar-link">.instanceof(constructor)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#property-name-value" class="sidebar-link">.property(name, [value])</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#ownproperty-name" class="sidebar-link">.ownProperty(name)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#ownpropertydescription-name-descriptor" class="sidebar-link">.ownPropertyDescription(name[, descriptor])</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#length" class="sidebar-link">.length</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#lengthof-value" class="sidebar-link">.lengthOf(value)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#match-regexp" class="sidebar-link">.match(regexp)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#string-string" class="sidebar-link">.string(string)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#keys-key1-key2" class="sidebar-link">.keys(key1, [key2], [...])</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#throw-constructor" class="sidebar-link">.throw(constructor)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#respondto-method" class="sidebar-link">.respondTo(method)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#itself" class="sidebar-link">.itself</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#satisfy-method" class="sidebar-link">.satisfy(method)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#closeto-expected-delta" class="sidebar-link">.closeTo(expected, delta)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#members-set" class="sidebar-link">.members(set)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#oneof-list" class="sidebar-link">.oneOf(list)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#change-object-property" class="sidebar-link">.change(object, property)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#increase-object-property" class="sidebar-link">.increase(object, property)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#decrease-object-property" class="sidebar-link">.decrease(object, property)</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#extensible" class="sidebar-link">.extensible</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#sealed" class="sidebar-link">.sealed</a></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#frozen" class="sidebar-link">.frozen</a></li></ul></li><li class="sidebar-sub-header"><a href="/blogs/test/Chaijs.html#tdd" class="sidebar-link">TDD</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="chai-js-断言库"><a href="#chai-js-断言库" class="header-anchor">#</a> chai.js 断言库</h1> <p><a href="https://juejin.cn/post/6844903934910283783#heading-45" target="_blank" rel="noopener noreferrer">参考文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>基于chai.js官方API文档翻译。仅列出BDD风格的expect/should API。TDD风格的Assert API由于不打算使用，暂时不放，后续可能会更新。</p> <h2 id="bdd"><a href="#bdd" class="header-anchor">#</a> BDD</h2> <p><code>expect</code>和<code>should</code>是BDD风格的，二者使用相同的链式语言来组织断言，但不同在于他们初始化断言的方式：expect使用构造函数来创建断言对象实例，而should通过为<code>Object.prototype</code>新增方法来实现断言（所以should不支持IE）；expect直接指向<code>chai.expect</code>，而should则是<code>chai.should()</code>。</p> <p>个人比较建议使用expect，should不仅不兼容IE，在某些情况下还需要改变断言方式来填坑。详细的比较可以看看官网Assertion Styles，说的很清楚。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> chai <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chai'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  expect <span class="token operator">=</span> chai<span class="token punctuation">.</span>expect<span class="token punctuation">,</span>
  should <span class="token operator">=</span> chai<span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="语言链"><a href="#语言链" class="header-anchor">#</a> 语言链</h2> <p>下面的接口是单纯作为语言链提供以期提高断言的可读性。除非被插件改写否则它们一般不提供测试功能。</p> <ul><li>to</li> <li>be</li> <li>been</li> <li>is</li> <li>that</li> <li>which</li> <li>and</li> <li>has</li> <li>have</li> <li>with</li> <li>at</li> <li>of</li> <li>same</li></ul> <h3 id="not"><a href="#not" class="header-anchor">#</a> .not</h3> <p>对之后的断言取反</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span>goodFn<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span>Error<span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'baz'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span>and<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="deep"><a href="#deep" class="header-anchor">#</a> .deep</h3> <p>设置deep标记，然后使用equal和property断言。该标记可以让其后的断言不是比较对象本身，而是递归比较对象的键值对</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token punctuation">{</span> bar<span class="token operator">:</span> <span class="token string">'baz'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token punctuation">{</span> bar<span class="token operator">:</span> <span class="token punctuation">{</span> baz<span class="token operator">:</span> <span class="token string">'quux'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'foo.bar.baz'</span><span class="token punctuation">,</span> <span class="token string">'quux'</span><span class="token punctuation">)</span>
</code></pre></div><p>deep.property中的特殊符号可以使用双反斜杠进行转义（第一个反斜杠是在字符串参数中对第二个反斜杠进行转义，第二个反斜杠用于在property中进行转义）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> deepCss <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">'.link'</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">'[target]'</span><span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token function">expect</span><span class="token punctuation">(</span>deepCss<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'\\.link.\\[target\\]'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="any"><a href="#any" class="header-anchor">#</a> .any</h3> <p>在keys断言之前使用any标记（与all相反）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>any<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'baz'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="all"><a href="#all" class="header-anchor">#</a> .all</h3> <p>在keys断言之前使用all标记（与any相反）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>all<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'baz'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="a-type-an-type"><a href="#a-type-an-type" class="header-anchor">#</a> .a(type) / .an(type)</h3> <ul><li>type：String，被测试的值的类型</li></ul> <p><code>a</code>和<code>an</code>断言即可作为语言链又可作为断言使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 类型断言</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">an</span><span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'null'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">an</span><span class="token punctuation">(</span><span class="token string">'undefined'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">an</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'promise'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'float32array'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'symbol'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// es6 overrides</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toStringTag<span class="token punctuation">]</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token string">'foo'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// language chain</span>
<span class="token function">expect</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>an<span class="token punctuation">.</span><span class="token function">instanceof</span><span class="token punctuation">(</span>Foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="include-value-contains-value"><a href="#include-value-contains-value" class="header-anchor">#</a> .include(value) / contains(value)</h3> <ul><li>value：Object | String | Number</li></ul> <p><code>include()</code>和<code>contains()</code>即可作为属性类断言前缀语言链又可作为作为判断数组、字符串是否包含某值的断言使用。当作为语言链使用时，常用于<code>key()</code>断言之前</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foobar'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> hello<span class="token operator">:</span> <span class="token string">'universe'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>include<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="ok"><a href="#ok" class="header-anchor">#</a> .ok</h3> <p>断言目标为真值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'everything'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>ok
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>ok
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>be<span class="token punctuation">.</span>ok
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>be<span class="token punctuation">.</span>ok
</code></pre></div><h3 id="true"><a href="#true" class="header-anchor">#</a> .true</h3> <p>断言目标为true，注意，这里与ok的区别是不进行类型转换，只能为true才能通过断言</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">true</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">true</span>
</code></pre></div><h3 id="false"><a href="#false" class="header-anchor">#</a> .false</h3> <p>断言目标为false</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">false</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">false</span>
</code></pre></div><h3 id="null"><a href="#null" class="header-anchor">#</a> .null</h3> <p>断言目标为null</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>null
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>be<span class="token punctuation">.</span>null
</code></pre></div><h3 id="undefined"><a href="#undefined" class="header-anchor">#</a> .undefined</h3> <p>断言目标为undefined。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span>undefine<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>undefined
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>be<span class="token punctuation">.</span>undefined
</code></pre></div><h3 id="nan"><a href="#nan" class="header-anchor">#</a> .NaN</h3> <p>断言目标为非数字NaN</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>null
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>be<span class="token punctuation">.</span>null
</code></pre></div><h3 id="exist"><a href="#exist" class="header-anchor">#</a> .exist</h3> <p>断言目标存在，即非null也非undefined</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token string">'hi'</span><span class="token punctuation">,</span>
  bar <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  baz

<span class="token function">expect</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>exist
<span class="token function">expect</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>exist
<span class="token function">expect</span><span class="token punctuation">(</span>baz<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>exist
</code></pre></div><h3 id="empty"><a href="#empty" class="header-anchor">#</a> .empty</h3> <p>断言目标的长度为0。对于数组和字符串，它检查length属性，对于对象，它检查可枚举属性的数量</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>empty
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>empty
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>empty
</code></pre></div><h3 id="arguments"><a href="#arguments" class="header-anchor">#</a> .arguments</h3> <p>断言目标是一个参数对象arguments</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>arguments
<span class="token punctuation">}</span>
</code></pre></div><h3 id="equal-value"><a href="#equal-value" class="header-anchor">#</a> .equal(value)</h3> <ul><li>value：Mixed</li></ul> <p>断言目标严格等于(===)value。另外，如果设置了deep标记，则断言目标深度等于value</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="eql-value"><a href="#eql-value" class="header-anchor">#</a> .eql(value)</h3> <ul><li>value：Mixed</li></ul> <p>断言目标深度等于value，相当于deep.equal(value)的简写</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="above-value"><a href="#above-value" class="header-anchor">#</a> .above(value)</h3> <ul><li>value： Number</li></ul> <p>断言目标大于（超过）<code>value</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">above</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre></div><p>也可接在<code>length</code>后来断言一个最小的长度。相比直接提供长度的好处是提供了更详细的错误消息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>length<span class="token punctuation">.</span><span class="token function">above</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>length<span class="token punctuation">.</span><span class="token function">above</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="least-value"><a href="#least-value" class="header-anchor">#</a> .least(value)</h3> <ul><li>value： Number</li></ul> <p>断言目标不小于（大于或等于）value</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>at<span class="token punctuation">.</span><span class="token function">least</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p>也可接在length后来断言一个最小的长度。相比直接提供长度的好处是提供了更详细的错误消息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>length<span class="token punctuation">.</span>of<span class="token punctuation">.</span>at<span class="token punctuation">.</span><span class="token function">least</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>length<span class="token punctuation">.</span>of<span class="token punctuation">.</span>at<span class="token punctuation">.</span><span class="token function">least</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="below-value"><a href="#below-value" class="header-anchor">#</a> .below(value)</h3> <ul><li>value：Number</li></ul> <p>断言目标小于value</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">below</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p>也可接在length后来断言一个最大的长度。相比直接提供长度的好处是提供了更详细的错误消息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>length<span class="token punctuation">.</span><span class="token function">below</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>length<span class="token punctuation">.</span><span class="token function">below</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="most-value"><a href="#most-value" class="header-anchor">#</a> .most(value)</h3> <ul><li>value：String</li></ul> <p>断言目标不大于（小于或等于）value</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>at<span class="token punctuation">.</span><span class="token function">most</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre></div><p>也可接在length后来断言一个最大的长度。相比直接提供长度的好处是提供了更详细的错误消息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>length<span class="token punctuation">.</span>of<span class="token punctuation">.</span>at<span class="token punctuation">.</span><span class="token function">most</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>length<span class="token punctuation">.</span>of<span class="token punctuation">.</span>at<span class="token punctuation">.</span><span class="token function">most</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="within-start-finish"><a href="#within-start-finish" class="header-anchor">#</a> .within(start, finish)</h3> <ul><li>start：Number，下限</li> <li>finish：Number，上限</li></ul> <p>断言目标在某个区间内</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">within</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p>也可接在length后来断言一个长度区间。相比直接提供长度的好处是提供了更详细的错误消息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>length<span class="token punctuation">.</span><span class="token function">within</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>length<span class="token punctuation">.</span><span class="token function">within</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="instanceof-constructor"><a href="#instanceof-constructor" class="header-anchor">#</a> .instanceof(constructor)</h3> <ul><li>constructor：Constructor，构造函数</li></ul> <p>断言目标是构造函数constructor的一个实例</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">Tea</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Chai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tea</span><span class="token punctuation">(</span><span class="token string">'chai'</span><span class="token punctuation">)</span>

<span class="token function">expect</span><span class="token punctuation">(</span>Chai<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>an<span class="token punctuation">.</span><span class="token function">instanceof</span><span class="token punctuation">(</span>Tea<span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>an<span class="token punctuation">.</span><span class="token function">instanceof</span><span class="token punctuation">(</span>Array<span class="token punctuation">)</span>
</code></pre></div><h3 id="property-name-value"><a href="#property-name-value" class="header-anchor">#</a> .property(name, [value])</h3> <ul><li>name：String，属性名</li> <li>value：Mixed，可选，属性值</li></ul> <p>断言目标是否拥有某个名为name的属性，可选地如果提供了value则该属性值还需要严格等于（===）value。如果设置了deep标记，则可以使用点.和中括号[]来指向对象和数组中的深层属性</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 简单引用</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span>
<span class="token function">expect</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span>pbj<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>

<span class="token comment">// 深层引用</span>
<span class="token keyword">var</span> deepObj <span class="token operator">=</span> <span class="token punctuation">{</span>
  green<span class="token operator">:</span> <span class="token punctuation">{</span> tea<span class="token operator">:</span> <span class="token string">'matcha'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  teas<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">'Chai'</span><span class="token punctuation">,</span> <span class="token string">'matcha'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> tea<span class="token operator">:</span> <span class="token string">'konacha'</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token function">expect</span><span class="token punctuation">(</span>deepObj<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'green.tea'</span><span class="token punctuation">,</span> <span class="token string">'matcha'</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span>deepObj<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'teas[1]'</span><span class="token punctuation">,</span> <span class="token string">'matcha'</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span>deepObj<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'teas[2].tea'</span><span class="token punctuation">,</span> <span class="token string">'konacha'</span><span class="token punctuation">)</span>
</code></pre></div><p>如果目标是一个数组，还可以直接使用一个或多个数组下标作为name来在嵌套数组中断言deep.property</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span> <span class="token string">'chai'</span><span class="token punctuation">,</span> <span class="token string">'matcha'</span><span class="token punctuation">,</span> <span class="token string">'konacha'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span> <span class="token punctuation">{</span> tea<span class="token operator">:</span> <span class="token string">'chai'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> tea<span class="token operator">:</span> <span class="token string">'matcha'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> tea<span class="token operator">:</span> <span class="token string">'konacha'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">]</span>

<span class="token function">expect</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'[0][1]'</span><span class="token punctuation">,</span> <span class="token string">'matcha'</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'[1][2].tea'</span><span class="token punctuation">,</span> <span class="token string">'konacha'</span><span class="token punctuation">)</span>
</code></pre></div><p>此外，property把断言的主语（subject）从原来的对象变为当前属性的值，使得可以在其后进一步衔接其它链式断言（来针对这个属性值进行测试）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span>that<span class="token punctuation">.</span>is<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span>deepObj<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'green'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span>that<span class="token punctuation">.</span>is<span class="token punctuation">.</span><span class="token function">an</span><span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span>that<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token punctuation">{</span> tea<span class="token operator">:</span> <span class="token string">'matcha'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span>deepObj<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'teas'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span>that<span class="token punctuation">.</span>is<span class="token punctuation">.</span><span class="token function">an</span><span class="token punctuation">(</span><span class="token string">'array'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span>with<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'[2]'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>that<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token punctuation">{</span> tea<span class="token operator">:</span> <span class="token string">'konacha'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>注意，只有当设置了deep标记的时候，在property() name中的点（.）和中括号（[]）才必须使用双反斜杠\进行转义（为什么是双反斜杠，在前文有提及），当没有设置deep标记的时候，是不能进行转义的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 简单指向</span>
<span class="token keyword">var</span> css <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">'.link[target]'</span><span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span>
<span class="token function">expect</span><span class="token punctuation">(</span>css<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'.link[target]'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span>

<span class="token comment">//深度指向</span>
<span class="token keyword">var</span> deepCss <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">'link'</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">'[target]'</span><span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token function">expect</span><span class="token punctuation">(</span>deepCss<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'\\.link\\.[target]'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="ownproperty-name"><a href="#ownproperty-name" class="header-anchor">#</a> .ownProperty(name)</h3> <ul><li>name：String，属性名</li></ul> <p>断言目标拥有名为name的自有属性</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">ownProperty</span><span class="token punctuation">(</span><span class="token string">'length'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="ownpropertydescription-name-descriptor"><a href="#ownpropertydescription-name-descriptor" class="header-anchor">#</a> .ownPropertyDescription(name[, descriptor])</h3> <ul><li>name：String，属性名</li> <li>descriptor： Object，描述对象，可选</li></ul> <p>断言目标的某个自有属性存在描述符对象，如果给定了descroptor描述符对象，则该属性的描述符对象必须与其相匹配</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">ownPropertyDescriptor</span><span class="token punctuation">(</span><span class="token string">'length'</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">ownPropertyDescriptor</span><span class="token punctuation">(</span><span class="token string">'length'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  configrable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  writeable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  value<span class="token operator">:</span> <span class="token number">4</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">ownPropertyDescriptor</span><span class="token punctuation">(</span><span class="token string">'length'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  configurable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  writeable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  value<span class="token operator">:</span> <span class="token number">3</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 将断言的主语改为了属性描述符对象</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">ownPropertyDescriptor</span><span class="token punctuation">(</span><span class="token string">'length'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'enumerable'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">ownPropertyDescriptor</span><span class="token punctuation">(</span><span class="token string">'length'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="length"><a href="#length" class="header-anchor">#</a> .length</h3> <p>设置.have.length标记作为比较length属性值的前缀</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>length<span class="token punctuation">.</span><span class="token function">above</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>length<span class="token punctuation">.</span><span class="token function">within</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="lengthof-value"><a href="#lengthof-value" class="header-anchor">#</a> .lengthOf(value)</h3> <ul><li>value：Number</li></ul> <p>断言目标的length属性为期望的值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">lengthOf</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foobar'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">lengthOf</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="match-regexp"><a href="#match-regexp" class="header-anchor">#</a> .match(regexp)</h3> <ul><li>regexp：RegExp，正则表达式</li></ul> <p>断言目标匹配到一个正则表达式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foobar'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/^foo/</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="string-string"><a href="#string-string" class="header-anchor">#</a> .string(string)</h3> <ul><li>string：String，字符串</li></ul> <p>断言目标字符串包含另一个字符串</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foobar'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="keys-key1-key2"><a href="#keys-key1-key2" class="header-anchor">#</a> .keys(key1, [key2], [...])</h3> <ul><li>key：String | Array | Object 属性名</li></ul> <p>断言目标包含传入的属性名。与any，all，contains或者have前缀结合使用会影响测试结果：</p> <p>当与any结合使用时，无论是使用have还是使用contains前缀，目标必须至少存在一个传入的属性名才能通过测试。注意，any或者all应当至少使用一个，否则默认为all</p> <p>当结合all和contains使用时，目标对象必须至少拥有全部传入的属性名，但是它也可以拥有其它属性名</p> <p>当结合all和have使用时，目标对象必须且仅能拥有全部传入的属性名</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 结合any使用</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> baz<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>any<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> baz<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>contains<span class="token punctuation">.</span>any<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>

<span class="token comment">// 结合all使用</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> baz<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>all<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'baz'</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> baz<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>contains<span class="token punctuation">.</span>all<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>

<span class="token comment">// 传入string</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> baz<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>any<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token comment">// 传入Array</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> baz<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>all<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'baz'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 传入Object</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> baz<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span>any<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">{</span> bar<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> foo<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="throw-constructor"><a href="#throw-constructor" class="header-anchor">#</a> .throw(constructor)</h3> <ul><li>constructor： ErrorConstroctor | String | RegExp</li></ul> <p>断言目标函数会抛出一个指定错误或错误类型（使用instanceOf计算），也可使用正则表达式或者字符串来检测错误消息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> err <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RefernceError</span><span class="token punctuation">(</span><span class="token string">'this is a bad function'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> err <span class="token punctuation">}</span>

<span class="token function">expect</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span>ReferenceError<span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span>Error<span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span><span class="token regex">/bad function/</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span><span class="token string">'good function'</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span>ReferrenceError<span class="token punctuation">,</span> <span class="token regex">/bad function/</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
</code></pre></div><p>注意，当一个抛错断言被否定了（前面有.not），那么它会从Error构造函数开始依次检查各个可能传入的参数。检查一个只是消息类型不匹配但是已知的错误，合理的方式是先断言该错误存在，然后使用.and后断言错误消息不匹配</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span>ReferenceError<span class="token punctuation">)</span>
  <span class="token punctuation">.</span>and<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span><span class="token regex">/good function/</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="respondto-method"><a href="#respondto-method" class="header-anchor">#</a> .respondTo(method)</h3> <ul><li>method：String</li></ul> <p>断言目标类或对象会响应一个方法（存在这个方法）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Klass</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">expect</span><span class="token punctuation">(</span>Klass<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">respondTo</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">respondTo</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
</code></pre></div><p>如果需要检查一个构造函数是否会响应一个静态方法（挂载在构造函数本身的方法），请查看itself标记</p> <div class="language-js extra-class"><pre class="language-js"><code>Klass<span class="token punctuation">.</span><span class="token function-variable function">baz</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">expect</span><span class="token punctuation">(</span>Klass<span class="token punctuation">)</span><span class="token punctuation">.</span>itself<span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">respondTo</span><span class="token punctuation">(</span><span class="token string">'baz'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="itself"><a href="#itself" class="header-anchor">#</a> .itself</h3> <p>设置itself标记，然后使用respondTo断言</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Foo<span class="token punctuation">.</span><span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">baz</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token function">expect</span><span class="token punctuation">(</span>Foo<span class="token punctuation">)</span><span class="token punctuation">.</span>itself<span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">respondTo</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span>Foo<span class="token punctuation">)</span><span class="token punctuation">.</span>itself<span class="token punctuation">.</span>not<span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">respond</span><span class="token punctuation">(</span><span class="token string">'baz'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="satisfy-method"><a href="#satisfy-method" class="header-anchor">#</a> .satisfy(method)</h3> <ul><li>method：Function，测试器，接受一个参数表示目标值，返回一个布尔值</li></ul> <p>断言目标值能够让给定的测试器返回真值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">satisfy</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> num <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="closeto-expected-delta"><a href="#closeto-expected-delta" class="header-anchor">#</a> .closeTo(expected, delta)</h3> <ul><li>expect：Numbre，期望值</li> <li>delta：Numbre，范围半径</li></ul> <p>断言目标数字等于expected，或在期望值的+/-delta范围内</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">closeTo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="members-set"><a href="#members-set" class="header-anchor">#</a> .members(set)</h3> <ul><li>set：Array</li></ul> <p>断言目标是set的超集，或前者有后者所有严格相等（===）的成员。另外，如果设置了deep标记，则成员进行深度比较（include/contains只能接受单个值，但它们的主语除了是数组，还可以判断字符串；members则将它们的能力扩展为能够接受一个数组，但主语只能是数组）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>include<span class="token punctuation">.</span><span class="token function">members</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>include<span class="token punctuation">.</span><span class="token function">members</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">members</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">members</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>deep<span class="token punctuation">.</span>include<span class="token punctuation">.</span><span class="token function">members</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="oneof-list"><a href="#oneof-list" class="header-anchor">#</a> .oneOf(list)</h3> <ul><li>list：Array</li></ul> <p>断言目标值出现在list数组的某个顶层位置（直接子元素，严格相等）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">oneOf</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">oneOf</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'z'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// 严格相等，所以对象类的值必须为同一个引用才能被判定为相等</span>
<span class="token keyword">var</span> three <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">oneOf</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span>three<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">oneOf</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">expect</span><span class="token punctuation">(</span>three<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">oneOf</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> three<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="change-object-property"><a href="#change-object-property" class="header-anchor">#</a> .change(object, property)</h3> <ul><li>object：Object，对象</li> <li>property：String，属性名</li></ul> <p>断言目标方法会改变指定对象的指定属性</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> val<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> obj<span class="token punctuation">.</span>val <span class="token operator">+=</span> <span class="token number">3</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">noChangeFn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">'bar'</span> <span class="token operator">+</span> <span class="token string">'baz'</span> <span class="token punctuation">}</span>

<span class="token function">expect</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'val'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="increase-object-property"><a href="#increase-object-property" class="header-anchor">#</a> .increase(object, property)</h3> <ul><li>object：Object，对象</li> <li>property：String，属性名</li></ul> <p>断言目标方法会增加指定对象的属性</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> val<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> obj<span class="token punctuation">.</span>val <span class="token operator">=</span> <span class="token number">15</span> <span class="token punctuation">}</span>
<span class="token function">expect</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">increase</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
</code></pre></div><h3 id="decrease-object-property"><a href="#decrease-object-property" class="header-anchor">#</a> .decrease(object, property)</h3> <ul><li>object：Object，对象</li> <li>property：String，属性名</li></ul> <p>断言目标方法会减少指定对象的属性</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> val<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> obj<span class="token punctuation">.</span>val <span class="token operator">=</span> <span class="token number">5</span> <span class="token punctuation">}</span>
<span class="token function">expect</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">decrease</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
</code></pre></div><h3 id="extensible"><a href="#extensible" class="header-anchor">#</a> .extensible</h3> <p>断言目标对象是可扩展的（可以添加新的属性）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> nonExtensibleObject <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">preventExtensions</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> sealedObject <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">seal</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> frozenObject <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>extensible
<span class="token function">expect</span><span class="token punctuation">(</span>nonExtensibleObject<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>be<span class="token punctuation">.</span>extensible
<span class="token function">expect</span><span class="token punctuation">(</span>sealObject<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>be<span class="token punctuation">.</span>extensible
<span class="token function">expect</span><span class="token punctuation">(</span>frozenObject<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>be<span class="token punctuation">.</span>extensible
</code></pre></div><h3 id="sealed"><a href="#sealed" class="header-anchor">#</a> .sealed</h3> <p>断言目标对象是封闭的（无法添加新的属性并且存在的属性不能被删除但可以被修改）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> sealedObject<span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">seal</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> frozenObject <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">expect</span><span class="token punctuation">(</span>sealedObject<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>sealed
<span class="token function">expect</span><span class="token punctuation">(</span>frozenObject<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>sealed
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>be<span class="token punctuation">.</span>sealed
</code></pre></div><h3 id="frozen"><a href="#frozen" class="header-anchor">#</a> .frozen</h3> <p>断言目标对象是冻结的（无法添加新的属性并且存在的属性不能被删除和修改）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> frozenObject <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">expect</span><span class="token punctuation">(</span>frozenObject<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>frozen
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>be<span class="token punctuation">.</span>frozen
</code></pre></div><h2 id="tdd"><a href="#tdd" class="header-anchor">#</a> TDD</h2> <p>除了一些语法糖以外，Chai提供的assert风格的断言和node.js包含的assert模块非常相似。assert风格是三种断言风格中唯一不支持链式调用的。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">5/18/2021, 5:54:06 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blogs/test/" class="prev router-link-active">
        test
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blogs/assets/js/app.899da232.js" defer></script><script src="/blogs/assets/js/2.c73eb779.js" defer></script><script src="/blogs/assets/js/12.71918856.js" defer></script>
  </body>
</html>
